# Access-Rules

一个基于 Cloudflare Workers 的反向代理工具，可以控制对后端资源的访问并根据状态码过滤响应。

本项目用于解决 Cloudflare R2 资源在访问文本文件时出现乱码的问题，以及针对其他文件访问后的默认行为不是自动下载而生的。



## 功能特点

- 反向代理：将请求转发到指定的目标服务器。
- 访问控制：只允许配置的正常状态码通过。
- 自动错误页面：对于非正常状态码，显示友好的错误页面。
- 内容类型处理：根据内容类型决定是否内联显示或作为附件下载。



## 部署

将此仓库下的 workers.js 部署到 Cloudflare Workers 中即可。



## 配置变量

在部署时需要配置以下环境变量：

- `GET_URL` (必需): 目标服务器地址。例如，你的 R2 存储桶中绑定的自定义域名。
- ` NORMAL_STATUS_CODES` (可选): 正常状态码列表，以逗号分隔，默认为 `200`。
